<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Taytay Shapefile Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    html, body { margin:0; height:100%; }
    #map { width:100%; height:100%; }
  </style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/shpjs/dist/shp.min.js"></script>
<script>
  // Initial map at Taytay, Palawan
  var map = L.map('map').setView([9.7806, 118.2108], 14);

  // OpenStreetMap tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19
  }).addTo(map);

  // Layer control
  var layers = {};
  var layerControl = L.control.layers(null, null, {collapsed:false}).addTo(map);

  // Function to load shapefiles
  function loadShapefile(fileName, label, color){
    shp(fileName).then(function(geojson){
      var layer = L.geoJSON(geojson, {
        style: {color: color, weight:2},
        onEachFeature: function(feature, l){
          l.bindPopup(label);
        }
      }).addTo(map);

      layers[label] = layer;
      layerControl.addOverlay(layer, label);
    }).catch(err => console.error("Error loading "+label, err));
  }

  // Load all shapefiles
  loadShapefile("Ace York Mangalino Boarding House.shp", "Ace York Mangalino Boarding House", "red");
  loadShapefile("Barangay Hall Barangay Poblacion.shp", "Barangay Hall - Poblacion", "blue");
  loadShapefile("Casa Rosa.shp", "Casa Rosa", "green");
  loadShapefile("DNR CENRO Taytay Palawan.shp", "DNR CENRO Taytay", "orange");
  loadShapefile("Fort Santa Isabel.shp", "Fort Santa Isabel", "purple");
  loadShapefile("Gentoleo Residence.shp", "Gentoleo Residence", "brown");
  loadShapefile("Happy Go.shp", "Happy Go", "yellow");
  loadShapefile("Julio Arzaga Elementary School.shp", "Julio Arzaga Elementary School", "pink");
  loadShapefile("PSU TAYTAY CAMPUS.shp", "PSU Taytay Campus", "cyan");
  loadShapefile("Poblacion Port.shp", "Poblacion Port", "lime");
  loadShapefile("Poblacion.shp", "Poblacion", "black");
  loadShapefile("Road.shp", "Roads", "gray");
  loadShapefile("Santa Monica Parish Church.shp", "Santa Monica Parish Church", "maroon");
  loadShapefile("St.Joseph the Worker Cathedral.shp", "St. Joseph the Worker Cathedral", "navy");
  loadShapefile("Taytay Public Market.shp", "Taytay Public Market", "teal");
  loadShapefile("Taytay palawan Municipal Hall.shp", "Taytay Municipal Hall", "gold");
</script>
</body>
</html>
